{"componentChunkName":"component---src-templates-page-tsx","path":"/concepts/flow/","result":{"data":{"site":{"siteMetadata":{"title":"HPCCSystems Solutions Lab","sidebarTitle":"HPCCSystems Solutions Lab","sidebarSubtext":"Documentation","siteLastUpdated":"2020-06-05T21:56:30.418Z","description":"HPCC Systems is a mature platform that has been heavily used in commercial applications for almost two decades, predating the development of Hadoop. Created by LexisNexis Risk Solutions, an innovative pioneer in big data processing, and open source for nearly a decade now, HPCC Systems features a vibrant development community that continues to push the boundaries of big data.","version":"3.5.5","siteUrl":"https://docs.kata.ai","keywords":"hpcc, hpccsystems, ecl","author":{"name":"HPCCSystems.com","url":"https://hpccsystems.com","email":"info@hpccsystems.com"},"socials":[{"name":"Twitter","imgpath":"icon-twitter.svg","url":"https://twitter.com/KataDotAI"},{"name":"GitHub","imgpath":"icon-github.svg","url":"https://github.com/kata-ai"},{"name":"LinkedIn","imgpath":"icon-linkedin.svg","url":"https://www.linkedin.com/company/yesboss/"},{"name":"Medium","imgpath":"icon-medium.svg","url":"https://medium.com/kata-engineering"}]}},"sectionList":{"edges":[{"node":{"title":"Advanced Concepts","items":[{"id":"FUNCTION","slug":"/hpcc/LearnECL/AdvanceConcepts/function","title":"FUNCTION"},{"id":"JOIN","slug":"/hpcc/LearnECL/AdvanceConcepts/join","title":"JOIN"},{"id":"MODULE","slug":"/hpcc/LearnECL/AdvanceConcepts/module","title":"MODULE"},{"id":"PROJECT","slug":"/hpcc/LearnECL/AdvanceConcepts/project","title":"PROJECT"},{"id":"TABLE","slug":"/hpcc/LearnECL/AdvanceConcepts/table","title":"TABLE"},{"id":"TRANSFORM","slug":"/hpcc/LearnECL/AdvanceConcepts/transform","title":"TRANSFORM"}]}},{"node":{"title":"Main Concepts","items":[{"id":"dataset","slug":"/hpcc/LearnECL/MainConcepts/dataset","title":"DATASET"},{"id":"filter","slug":"/hpcc/LearnECL/MainConcepts/filter","title":"FILTER"},{"id":"introducingECL","slug":"/hpcc/LearnECL/MainConcepts/introducingECL","title":"INTRODUCING ECL"},{"id":"mathematics","slug":"/hpcc/LearnECL/MainConcepts/mathematics","title":"MATHEMATICS"},{"id":"namingConvension","slug":"/hpcc/LearnECL/MainConcepts/namingConvension","title":"NAMING CONVENTION"},{"id":"output","slug":"/hpcc/LearnECL/MainConcepts/output","title":"OUTPUT"},{"id":"recordstructure","slug":"/hpcc/LearnECL/MainConcepts/recordStructure","title":"RECORD Structure"},{"id":"sort","slug":"/hpcc/LearnECL/MainConcepts/sort","title":"SORT"}]}}]},"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flow is the main building block of a Bot. A flow corresponds to a discourse in a conversation."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./images/flow/figure-1.png","alt":"Figure 1"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A flow consists of intents, states, and actions. The processing of user message is divided into three pipelined steps:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Intent Recognition Converting raw message into structured information (in form of intent and attributes)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"State Mapping Determining the state of the bot and the context variables"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Chosing Action Generate response by executing defined action"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./images/flow/figure-2.png","alt":"Figure 2"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can think the Intent - State - Action separation as an MVC model. Where the intents are the controller, the states as the model and the actions as the views."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./images/flow/figure-3.png","alt":"Figure 3"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Flow Stack"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A bot can have multiple flows and those can be active at the same time. Those information is stored in the flow stack. The bot also store which flow is the current flow."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./images/flow/figure-4.png","alt":"Figure 4"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Whenever a flow is opened, it will become the current flow. This will push the previously current flow to the stack. Those flows in the stack are on hold."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Flow Selection"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Whenever a new input arrives, the bot will first select a flow. When there is a current flow. That flow will be the preferred flow to look at. The bot will look for a matching "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"intent"}]},{"type":"text","value":" in that flow. In case there is no intent matched, it will look for "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"initial intents"}]},{"type":"text","value":" of other flows. If other flows matched, then it will push the current flow to the stack and put the new selected flow to the current flow. If the new selected flow already in the stack, then it will be removed from the stack."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Flow Reenter"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When a flow is closed, the flow at the top of the stack will become the current flow. The flow will be notified by the command reenter. This shall be captured by a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"reenter intent"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Example:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"intents:\n  reenter:\n    type: command\n    condition: \"content == 'reenter'\"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Volatile Flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want to make a flow to be immediately closed, when a new flow is selected, you can set the flow as volatile."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"flows:\n  myFlow:\n    volatile: true\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Setting a flow as volatile will omit it from being stored in flow stack."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Expiring Flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can set a flow to automatically expire after some time. this is useful e.g. for short-lived flow like promotion etc."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"flows:\n  myFlow:\n    expire: 100000\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Fallback Flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In case that no flow can be matched, the bot won't be able to process the conversation. To avoid this condition, you will need to assign a fallback flow with a fallback intent, so that in such case, it will fallback to the specified flow and intent:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"fallback: true\nintents:\n  fallbackIntent:\n    fallback: true\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Context"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Every flow has a "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":" object that can be used to store flow-specific variables. This context variables can be stored during state mapping and can be used as condition in intent, transition and action selection."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Storing variable example:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"states:\n  init:\n    transit:\n      context.isActive: 'true'\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Using variable in intent:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"intents:\n  continueIntent:\n    condition: 'context.isActive == true'\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Using variable in transition:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"text","value":"states:\n  init:\n    transitions:\n      done:\n        condition: 'context.hasName && context.hasPhone'\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Meta Context"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Meta Context is read-only system defined context fields. It is accessible at "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"context.<meta>"}]},{"type":"text","value":". Following are generally available meta context, accessible at any time."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$init : boolean"}]},{"type":"text","value":" - true if entering a new flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$flow : string"}]},{"type":"text","value":" - current flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$state : string"}]},{"type":"text","value":" - describing current state"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$lastFlow : string"}]},{"type":"text","value":" - describe last flow"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$lastState : string"}]},{"type":"text","value":" - describe last state"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$now : number"}]},{"type":"text","value":" - current timestamp"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$timestamp : number"}]},{"type":"text","value":" - session timestamp"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$dataKey : string"}]},{"type":"text","value":" - data key for connecting multiple sessions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$sessionId : string"}]},{"type":"text","value":" - current session id"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$channelId : string"}]},{"type":"text","value":" - current channel id"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$deploymentId : string"}]},{"type":"text","value":" - current deployment id"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"$userId : string"}]},{"type":"text","value":" - user / partner id from channel"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"tableOfContents":"<ul>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#flow-stack\">Flow Stack</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#flow-selection\">Flow Selection</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#flow-reenter\">Flow Reenter</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#volatile-flow\">Volatile Flow</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#expiring-flow\">Expiring Flow</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#fallback-flow\">Fallback Flow</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#context\">Context</a></li>\n<li><a href=\"/hpcc-solutions-lab/concepts/flow/#meta-context\">Meta Context</a></li>\n</ul>","excerpt":"Flow is the main building block of a Bot. A flow corresponds to a discourse in a conversation.Figure 1A flow consists of intents, statesâ€¦","frontmatter":{"id":"flow","title":"Flow","description":null,"prev":"nlu","next":"intent"},"fields":{"slug":"/concepts/flow/"}},"allFile":{"edges":[{"node":{"gitRemote":{"webLink":"https://alfjjacob:58e9fd5edbad4eccf8bb133c55491be00091f1c7@github.com/hpccsystems-solutions-lab/Learn-ECL","ref":"master","pathname":"/hpccsystems-solutions-lab/Learn-ECL.git","organization":"hpccsystems-solutions-lab","name":"Learn-ECL"}}},{"node":{"gitRemote":{"webLink":"https://alfjjacob:58e9fd5edbad4eccf8bb133c55491be00091f1c7@github.com/hpccsystems-solutions-lab/ECL-Pattern-Job-Scheduling","ref":"master","pathname":"/hpccsystems-solutions-lab/ECL-Pattern-Job-Scheduling.git","organization":"hpccsystems-solutions-lab","name":"ECL-Pattern-Job-Scheduling"}}},{"node":{"gitRemote":{"webLink":"https://alfjjacob:58e9fd5edbad4eccf8bb133c55491be00091f1c7@github.com/hpccsystems-solutions-lab/CodeDay_May2020","ref":"master","pathname":"/hpccsystems-solutions-lab/CodeDay_May2020.git","organization":"hpccsystems-solutions-lab","name":"CodeDay_May2020"}}},{"node":{"gitRemote":{"webLink":"https://alfjjacob:58e9fd5edbad4eccf8bb133c55491be00091f1c7@github.com/hpccsystems-solutions-lab/ECL-Sample-Cheatsheet","ref":"master","pathname":"/hpccsystems-solutions-lab/ECL-Sample-Cheatsheet.git","organization":"hpccsystems-solutions-lab","name":"ECL-Sample-Cheatsheet"}}}]}},"pageContext":{"slug":"/concepts/flow/"}}}